<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>Codex</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="/stylesheets/codex.css" type="text/css" media="screen" />
  </head>
  <body>

      <div id="#container">

          <h1>The Yodel Codex</h1>
          <p>
            The fundamental purpose of the Codex is to provide Fabric
            applications with a consistent view of information and services
            regardless of the source of those elements, so insulating
            information fabric applications from the impact of external change.
          </p>
          <p>
            The Codex is itself an information fabric application (or set of applications). It provides information to user-facing IF applications on request, structured according to the domain model and through a RESTful API. It also allows IF applications to make transactions against yodel, again using ReST for example orders can be sent to the codex via a POST request.
          </p>
          <p>
              This application will show how those restfull API's can be used
              and simulate a walk through of an end customer (Wile E Coyote)
              placing an order with a yodel customer (Acme).
          </p>
          <h2>Current status</h2>
          <p>
              This work is for discussion, to allow us to visualize the behaviour of the codex.
              We expect that this will evolve into the full product.
          </p>
          <p>
              POSTS and DELETE are not yet modeled.
          </p>
    <h2>API examples as hyperlinks</h2>
    <ul>
        <li>list of Postcodes that yodel services <br/><a href="/postcodes">codex.yodel.co.uk/postcodes</a></li>
        <li>Details for a specific postcode <br/><a href="/postcodes/SW17%208LW">codex.yodel.co.uk/postcodes/SW17%208LW</a></li>
        <li>list of the Yodel products i.e. services <br/><a href="/products">codex.yodel.co.uk/products</a></li>
        <li>information on a specific product <br/><a href="/products/Mid_Range">codex.yodel.co.uk/products/Mid_Range</a></li>
        <li>list of all yodel users <br/><a href="/users">codex.yodel.co.uk/users</a></li>
        <li>details for a specific user <br/><a href="/users/geoff">codex.yodel.co.uk/users/geoff</a></li>
        <li>a list of a users orders <br/><a href="/users/geoff/orders">codex.yodel.co.uk/users/geoff/orders</a></li>
        <li>a specific order for a user <br/><a href="/users/geoff/orders/272625">codex.yodel.co.uk/users/geoff/orders/272625</a></li>
        <li>The consigments for a specific order for user geoff <br/><a href="/users/geoff/orders/272625/consignments">codex.yodel.co.uk/users/geoff/orders/272625/consignments</a></li>
        <li>A specific consignment for a specific order for user geoff <br/><a href="/users/geoff/orders/272625/consignments/3456">codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456</a></li>
        <li>A list of parcels for a specific consignment for a specific order for user geoff <br/><a href="/users/geoff/orders/272625/consignments/3456/parcels">codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456/parcels</a></li>
        <li>A specific parcel for a specific consignment for a specific order for user geoff <br/><a href="/users/geoff/orders/272625/consignments/3456/parcels/11102235">codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456/parcels/11102235</a></li>
        <li>The label for a parcel<br/><a href="/users/geoff/orders/272625/consignments/3456/parcels/11102235/label">codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456/parcels/11102235/label</a></li>
    </ul>

    <h2>Ideas, thoughts and discussion</h2>
    <ul>
        <li>
            Does not include security or sessions, but take a look at the great
            work that lee did on the wiki
        </li>
        <li>
            Could consignments be a looser relationship than heirarchal, do we
            need them at all?
        </li>
        <li>
            Could there be a one to one relatioonship bettween accounts and
            contract and user - this would be a big simplification, but may mean
            that the business would have to evolve till all the complexity was
            refelected in the API
        </li>
        <li>
            Would like to have a business owner for this
        </li>
        <li>
            Colaborate on the creation of the REST API
        </li>
        <li>
            Should the xml files have links back to their parents in the heirarchy?
            
        </li>
    </ul>


    <h2>walkthrough</h2>
    <ul>
      <li>
          01/02/2010 09:10:00<br/>
          <p>
              Wile E. Coyote calls ACME and to place an order Geoff from ACME
              records the sale and when he comes to ship the products to Mr
              Coyote he opens his browser on yodel.co.uk
          </p>
      </li>
      <li>
          01/02/2010 09:11:00<br/>
          <p>
          Geoff logs into the yodel website. This web site offers him a UI
          which allows him to enter the products he whishes to ship to Mr Coyote.
          When Geoff logs in the the Yodel website it makes a call to the codex
          asking for Geoffs details.
          </p>
          <p>
          The URL that represents Geoff is <a href="/users/geoff">codex.yodel.co.uk/users/geoff</a>. <br/>
          The Yodel website has a dashboard. This shows the most important information to Geoff.
          To get the Geoff's current list of orders it makes another call to the codex using this API.
          <a href="/users/geoff/orders">codex.yodel.co.uk/users/geoff/orders</a>.
          </p>
      </li>
      <li>
          01/02/2010 09:15:00<br/>
          <p>
          Geoff wants to creates a new order so he clicks on the New order button in the yodel website.
          This shows a form where Geoff can enter Mr Coyotes information. Geoff fills in the order information supplied for Mr Coyote.
          When he is done he hits save.
          </p>
          <p>
          The Yodel website then posts to the codex the information for this new order.
          The data for the order is in the POST format and is posted to codex.yodel.co.uk/users/geoff/orders.
          This is successfull and redirects the response to the following new order, which has now been given an order id.
          <a href="/users/geoff/orders/272625">codex.yodel.co.uk/users/geoff/orders/272625</a>
          </p>
      </li>
      <li>
          01/02/2010 09:16:30 01/02/2010 09:15:00<br/>
          <p>
          There are no consignments in this order yet so Geoff hits a "new consignment" button.
          He is presented with a a form fills for the consignment information. Once this is complete he presses "save" and the form data is posted to
          the yodel codex here  codex.yodel.co.uk/users/geoff/orders/272625/consignments
          Again this is successfull and the codex creates a new consignment id and redirects the response to the details for the new consignment
          <a href="/users/geoff/orders/272625/consignments/3456">codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456</a>
          </p>
      </li>
      <li>
          01/02/2010 09:30:56<br/>
          <p>
              Geoff places alot of orders with yodel and he likes to know what is going where.
              so he changes the description to "Shipment to Mr Cyote 300 invisible holes"
              Notice that Geoff can leave comments on the order these are posted to the codex so that they can be shared accross all the yodelsites.
              He adds the parcels to the consignment using the yodel website which inturn sends a post containing the parcel object to the codex
              <a href="/users/geoff/orders/272625">codex.yodel.co.uk/users/geoff/orders/272625</a>
              01/02/2010 09:47:12 - Geoff adds the notification methods for Mr Coyote.
          </p>
      </li>
      <li>
          01/02/2010 10:30:56<br/>
          <p>
              My Coyote changes his mind about the order and now only wants 200 invisible holes, and says that he would like Geoff
              to proceed  Geoff changes the description and number of parcels. The yodel website acheives this by sending a DELETE to the representation of the parcel on the codex.
              DELETE codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456/parcels/11102236, if the call is successfull it returns the informtion about the consignment and the you will notice the delet in the history.
              <a href="/users/geoff/orders/272625/consignments/3456">codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456</a>
          </p>
      </li>
      <li>
          01/02/2010 10:45:51<br/>
          <p>
            When the codex is posted parcel details it automatically attempts to get the pre advice |discussion needed here| when preadvice is available the label for the parcel will be available.
            the yodel website will be able to get the label from the following URI
            <a href="/users/geoff/orders/272625/consignments/3456/parcels/11102235">
                codex.yodel.co.uk/users/geoff/orders/272625/consignments/3456/parcels/11102235/label
            </a>
          </p>
      </li>
      <li>
          02/02/2010 00:22:01 - in the batch run at night the and geoffs order
          is updated, and the van driver is scghedueld
      </li>
      <li>
          03/02/2010 08:45:06 - Then the order is collected by driver Mike who
          has van id 063428
      </li>
      <li>
          11/02/2010 10:33:03 - Parcel id 11102235 delivered
      </li>
      <li>
          14/02/2010 12:12:55 - Parcel id 11102234 delivered
      </li>
      <li>
          14/02/2010 12:12:55 - as all of the tracking status come in on the
          oder its updated, till eventually all the parces are successfull
          delivered.
      </li>
    </ul>

      </div>
  </body>
</html>
